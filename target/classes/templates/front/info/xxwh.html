<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>基本信息</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../css/style.css" media="all">
    <link rel="stylesheet" href="../../css/bootstrap.min.css" media="all">

    <style>

        .layui-elem-field{
            margin-left: 70px;
            margin-bottom: 20px;
        }

    </style>

</head>

<body style="margin-top: 20px;background-color: rgb(242,242,242)">

    <div class="layui-fluid" id="LAY-app-message-detail">
        <div class="layui-card layuiAdmin-msg-detail">
            <div class="layui-card" style="padding-top: 5px">

                <div class="container" style="margin-top: 30px;margin-bottom: 50px">
                    <ul class="nav nav-pills nav-justified step step-arrow">
                        <li>
                            <a>填写中</a>
                        </li>
                        <li>
                            <a>已暂存</a>
                        </li>
                        <li>
                            <a id="shenhe">待审核</a>
                        </li>
                        <li>
                            <a>审核通过</a>
                        </li>
                    </ul>
                </div>

                <fieldset class="layui-elem-field layui-field-title" style="padding-top: 5px">
                    <legend>个人简历</legend>
                </fieldset>

                <form class="layui-form layui-form-pane" action="" style="margin: 10px auto!important;">

                    <input type="hidden" name="stuNo" th:value="${student.getStuNo()}">
                    <input type="hidden" name="stuName" th:value="${student.getStuName()}">
                    <input type="hidden" name="stuFaculty" th:value="${student.getFaculty()}">
                    <input type="hidden" name="stuClass" th:value="${student.getStuClass()}">

                    <fieldset class="layui-elem-field" style="width: 79%;">
                        <legend>个人信息</legend>
                        <div class="layui-field-box">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">姓名</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="name" th:value="${student.getStuName()}"  readonly="readonly" lay-verify="required" placeholder="请输入" autocomplete="off"
                                            class="layui-input">
                                    </div>
                                </div>

                                <div class="layui-inline">
                                    <label class="layui-form-label">民族</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="nation" th:value="${resume.getNation()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                            class="layui-input notgai">
                                    </div>
                                </div>

                                <div class="layui-inline">
                                    <label class="layui-form-label">年龄</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="age" th:value="${resume.getAge()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                            class="layui-input notgai">
                                    </div>
                                </div>
                            </div>

                            <div class="layui-form-item">

                                <div class="layui-inline">
                                    <label class="layui-form-label">电话</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="phone"  th:value="${student.getTel()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                            class="layui-input">
                                    </div>
                                </div>


                                <div class="layui-inline">
                                    <label class="layui-form-label">进校日期</label>
<!--                                    <div class="layui-input-block">-->
<!--                                        <input type="text" name="startDate" th:value="${resume.getStartDate()}" id="date" lay-verify="required" autocomplete="off" class="layui-input notgai">-->
<!--                                    </div>-->
                                    <div class="layui-input-inline">
                                        <input type="text" name="startDate" th:value="${resume.getStartDate()}" id="date" lay-verify="required" autocomplete="off" class="layui-input notgai">
                                    </div>
                                </div>

                                <div class="layui-inline">
                                    <label class="layui-form-label">毕业日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="endDate" th:value="${resume.getEndDate()}" id="date1" lay-verify="required" autocomplete="off" class="layui-input notgai">
                                    </div>
                                </div>



                            </div>

                            <div class="layui-form-item">

                                <div class="layui-inline"style=" margin-right: 23px">
                                    <label class="layui-form-label">专业</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="zuanye" disabled="" readonly="readonly" th:value="${student.getProfession()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                               class="layui-input">
                                    </div>
                                </div>

                                <div class="layui-inline">
                                    <label class="layui-form-label">性别</label>
                                    <div class="layui-input-block notgai" >
                                        <input id="credit" type="radio" name="sex" value="男" title="男">
                                        <input id="debit" type="radio" name="sex" value="女" title="女">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </fieldset>


                    <fieldset class="layui-elem-field" style="width:79%;">
                        <legend>教育背景</legend>
                        <div class="layui-form-item" style="padding: 10px 15px 0px;">
                            <div class="layui-inline">
                                <label class="layui-form-label">时间</label>
<!--                                <div class="layui-input-inline">-->
<!--                                    <input type="text"  class="layui-input notgai" th:value="${resume.getStartDate() + ' - ' + resume.getEndDate()}"  lay-verify="required" id="test6" placeholder=" - ">-->
<!--                                </div>-->
                                <div class="layui-input-inline">
                                <input type="text" class="layui-input notgai" th:value="${resume.getStartDate()  + resume.getEndDate()}"  lay-verify="required" id="test6" placeholder=" - ">
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">大学</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="educationSchool" readonly="readonly" th:value="${'皖西学院'}"  lay-verify="required" placeholder="请输入" autocomplete="off"
                                        class="layui-input">
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">专业</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="zy" readonly="readonly" th:value="${student.getProfession()}"  lay-verify="required" placeholder="请输入" autocomplete="off"
                                        class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getEducationBackground()}" name="educationBackground" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="layui-elem-field" style="width: 79%;">
                        <legend>工作经验</legend>

                        <div class="layui-form-item" style="padding: 10px 15px 0px;">

                            <label class="layui-form-label">时间</label>
<!--                            <div class="layui-input-inline">-->
<!--                                <input type="text" name="workTime1" th:value="${resume.getWorkTime1()}" class="layui-input notgai" lay-verify="required" id="test7" placeholder=" - ">-->
<!--                            </div>-->

                            <div class="layui-input-inline">
                                <input type="text" name="workTime1" th:value="${resume.getWorkTime1()}" class="layui-input notgai" lay-verify="required" id="test7" placeholder=" - ">
                            </div>

                            <label class="layui-form-label">公司</label>
                            <div class="layui-input-inline">
                                <input type="text" name="workCompany1" th:value="${resume.getWorkCompany1()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                    class="layui-input notgai">
                            </div>

                            <label class="layui-form-label">专业</label>
                            <div class="layui-input-inline">
                                <input type="text" name="zhiye" readonly="readonly" th:value="${student.getProfession()}"  lay-verify="required" placeholder="请输入" autocomplete="off"
                                    class="layui-input">
                            </div>

                        </div>

                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getWorkExperience1()}" name="workExperience1" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item" style="padding: 10px 15px 0px;">

                            <label class="layui-form-label">时间</label>
<!--                            <div class="layui-input-inline">-->
<!--                                <input type="text" name="workTime2" th:value="${resume.getWorkTime2()}" class="layui-input notgai"  lay-verify="required" id="test8" placeholder=" - ">-->
<!--                            </div>-->

                            <div class="layui-input-inline">
                                <input type="text" name="workTime2" th:value="${resume.getWorkTime2()}" class="layui-input notgai" lay-verify="required" id="test8" placeholder=" - ">
                            </div>

                            <label class="layui-form-label">公司</label>
                            <div class="layui-input-inline">
                                <input type="text" name="workCompany2" th:value="${resume.getWorkCompany2()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                       class="layui-input notgai">
                            </div>

                            <label class="layui-form-label">专业</label>
                            <div class="layui-input-inline">
                                <input type="text" name="zhiye" readonly="readonly" th:value="${student.getProfession()}"  lay-verify="required" placeholder="请输入" autocomplete="off"
                                       class="layui-input">
                            </div>

                        </div>

                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getWorkExperience2()}" name="workExperience2" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item" style="padding: 10px 15px 0px;">

                            <label class="layui-form-label">时间</label>
<!--                            <div class="layui-input-inline">-->
<!--                                <input type="text" name="workTime3" th:value="${resume.getWorkTime3()}" class="layui-input notgai" lay-verify="required" id="test9" placeholder=" - ">-->
<!--                            </div>-->

                            <div class="layui-input-inline">
                                <input type="text" name="workTime3" th:value="${resume.getWorkTime3()}" class="layui-input notgai" lay-verify="required" id="test9" placeholder=" - ">
                            </div>

                            <label class="layui-form-label">公司</label>
                            <div class="layui-input-inline">
                                <input type="text" name="workCompany3" th:value="${resume.getWorkCompany3()}" lay-verify="required" placeholder="请输入" autocomplete="off"
                                       class="layui-input notgai">
                            </div>

                            <label class="layui-form-label">专业</label>
                            <div class="layui-input-inline">
                                <input type="text" name="zhiye" readonly="readonly" th:value="${student.getProfession()}"  lay-verify="required" placeholder="请输入" autocomplete="off"
                                       class="layui-input">
                            </div>

                        </div>

                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getWorkExperience3()}" name="workExperience3" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="layui-elem-field" style="width: 79%;">
                        <legend>荣誉证书</legend>
                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text" >
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getHonor()}" name="honor" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="layui-elem-field" style="width: 79%;">
                        <legend>自我评价</legend>
                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getSelfAssessment()}" name="selfAssessment" lay-verify="required" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="layui-elem-field" style="width: 79%;">
                        <legend>提交说明</legend>
                        <div class="layui-field-box">
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" th:text="${resume.getSubmitInstructions()}" name="submitInstructions" class="layui-textarea notgai"></textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <div class="layui-btn-container" style="padding-left: 65%">
                        <button type="button" lay-submit="zancun" lay-filter="zancun" class="layui-btn notgai">暂存</button>
                        <button type="button" lay-submit="tijiao" lay-filter="tijiao" class="layui-btn notgai">提交</button>
                        <a th:href="@{/xxwh/stu/yulanXxwh/}+${student.getStuNo}" class="layui-btn">预览</a>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <script src="../../layuiadmin/layui/layui.js"></script>
    <script src="../../js/lib.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<!--    <script src="http://www.datouwang.com/img/js/demo_ad.js"></script>-->
<!--    <script src="http://www.datouwang.com/img/js/demo_tj.js"></script>-->
    <script>
        // bsStep(1);
        $(function(){
            if('[[${resume.getSex()}]]' == '男'){
                $('#credit').attr("checked","");
            }else{
                $('#debit').attr("checked","");
            }

            if('[[${resume.getStatus()}]]' == '已暂存'){
                bsStep(2);
            }else if('[[${resume.getStatus()}]]' == '待审核') {
                $(".notgai").attr("disabled",true);
                bsStep(3);
            }else if('[[${resume.getStatus()}]]' == '已完成'){
                bsStep(4);
            }else if('[[${resume.getStatus()}]]' == '已驳回'){
                $("#shenhe").text('已驳回');
                bsStep(3);
            }else{
                bsStep(1);
            }

        });
    </script>
    <script>
        layui.config({
            base: '../../layuiadmin/' //静态资源所在路径
        }).extend({
            index: 'lib/index' //主入口模块
        }).use(['form', 'layedit', 'laydate','element'], function () {
            var form = layui.form
                , layer = layui.layer
                , layedit = layui.layedit
                , laydate = layui.laydate
                , element = layui.element;


            form.on('submit(zancun)', function (data) {
                var _form = data.field;
                layer.open({
                    title: "是否暂存",
                    content: '是否暂存？',
                    btn: ['确定','取消'],
                    yes: function(index, layero) {

                        $.ajax({
                            url: "/xxwh/stu/holdxxwh",
                            type: "POST",
                            data: {
                                'stuNo' : _form.stuNo,
                                'stuName' : _form.stuName,
                                'stuClass' : _form.stuClass,
                                'stuFaculty' : _form.stuFaculty,
                                'sex' : _form.sex,
                                'age' : _form.age,
                                'phone' : _form.phone,
                                'nation' : _form.nation,
                                'startDate' :  _form.startDate,
                                'endDate' : _form.endDate,
                                'educationSchool' : _form.educationSchool,
                                'educationBackground' : _form.educationBackground,
                                'workTime1' : _form.workTime1,
                                'workTime2' : _form.workTime2,
                                'workTime3' : _form.workTime3,
                                'workCompany1' : _form.workCompany1,
                                'workCompany2' : _form.workCompany2,
                                'workCompany3' : _form.workCompany3,
                                'workExperience1' : _form.workExperience1,
                                'workExperience2' : _form.workExperience2,
                                'workExperience3' : _form.workExperience3,
                                'honor' : _form.honor,
                                'selfAssessment' : _form.selfAssessment,
                                'submitInstructions' : _form.submitInstructions
                            },
                            async: false,
                            success: function (res) {
                                if (res.code == 200) {
                                    layer.msg(res.msg, {time: 3000});
                                } else {
                                    layer.msg(res.msg, {time: 3000});
                                }
                            },
                            error: function () {
                                layer.msg("提交时发生错误，请重试", {time: 3000, icon: 7});
                            }
                        });
                        return false;
                    }
                });
            });

            form.on('submit(tijiao)', function (data) {
                var _form = data.field;
                layer.open({
                    title: "是否提交",
                    content: '是否提交？',
                    btn: ['确定','取消'],
                    yes: function(index, layero) {

                        $.ajax({
                            url: "/xxwh/stu/submitXxwh",
                            type: "POST",
                            data: {
                                'stuNo' : _form.stuNo,
                                'stuName' : _form.stuName,
                                'stuClass' : _form.stuClass,
                                'stuFaculty' : _form.stuFaculty,
                                'sex' : _form.sex,
                                'age' : _form.age,
                                'phone' : _form.phone,
                                'nation' : _form.nation,
                                'startDate' :  _form.startDate,
                                'endDate' : _form.endDate,
                                'educationSchool' : _form.educationSchool,
                                'educationBackground' : _form.educationBackground,
                                'workTime1' : _form.workTime1,
                                'workTime2' : _form.workTime2,
                                'workTime3' : _form.workTime3,
                                'workCompany1' : _form.workCompany1,
                                'workCompany2' : _form.workCompany2,
                                'workCompany3' : _form.workCompany3,
                                'workExperience1' : _form.workExperience1,
                                'workExperience2' : _form.workExperience2,
                                'workExperience3' : _form.workExperience3,
                                'honor' : _form.honor,
                                'selfAssessment' : _form.selfAssessment,
                                'submitInstructions' : _form.submitInstructions
                            },
                            async: false,
                            success: function (res) {
                                if (res.code == 200) {
                                    layer.msg(res.msg, {time: 3000});
                                } else {
                                    layer.msg(res.msg, {time: 3000});
                                }
                            },
                            error: function () {
                                layer.msg("提交时发生错误，请重试", {time: 3000, icon: 7});
                            }
                        });
                        return false;
                    }
                });
            });


            form.on('submit(yulan)', function (data) {
                var _form = data.field;

                $.ajax({
                    url: "/xxwh/stu/yulanXxwh",
                    type: "POST",
                    data: {
                        'stuNo' : _form.stuNo
                    },
                    async: false,
                    success: function (res) {
                        if (res.code == 200) {
                            layer.msg(res.msg, {time: 1000});
                        } else {
                            layer.msg(res.msg, {time: 1000});
                        }
                    },
                    error: function () {
                        layer.msg("提交时发生错误，请重试", {time: 3000, icon: 7});
                    }
                });

                // layer.open({
                //     title: "是否提交",
                //     content: '是否提交？',
                //     btn: ['确定','取消'],
                //     yes: function(index, layero) {
                //         return false;
                //     }
                // });
            });

            //日期
            laydate.render({
                elem: '#date'
                ,type: 'month'
            });
            laydate.render({
                elem: '#date1'
                ,type: 'month'
            });

              //日期范围
            laydate.render({
                elem: '#test6'
                ,type: 'month'
                ,range: true
            });

            //日期范围
            laydate.render({
                elem: '#test7'
                ,type: 'month'
                ,range: true
            });

            //日期范围
            laydate.render({
                elem: '#test8'
                ,type: 'month'
                ,range: true
            });

            //日期范围
            laydate.render({
                elem: '#test9'
                ,type: 'month'
                ,range: true
            });
        })
    </script>
</body>

</html>